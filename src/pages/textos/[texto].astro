---
import StoryblokComponent from "@storyblok/astro/StoryblokComponent.astro";
import { useStoryblokApi } from "@storyblok/astro";
import Layout from "../../layouts/Layout.astro";

export async function getStaticPaths() {
  const storyblokApi = useStoryblokApi();

  const { data: texts } = await storyblokApi.get("cdn/stories", {
    version: "draft",
    starts_with: "textos/",
  });

  // return [
  //   {
  //     params: { texto: "test" },
  //   },
  // ];

  // console.log("texts.stories", texts.stories);
  return texts.stories.map((story: any) => ({
    params: { texto: story.slug as string },
    props: { content: story.content, titulo: story.name },
  }));
}
const { texto } = Astro.params;
const { content, titulo } = Astro.props;
---

<Layout title="Something">
  <StoryblokComponent blok={content} titulo={titulo} />
  {texto}
</Layout>
